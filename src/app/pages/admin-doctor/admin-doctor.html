<div class="flex flex-row-reverse h-screen dark:bg-gray-900 dark:text-white" dir="ltr">

  <!-- Sidebar: Doctor List & Status Filters -->
  <div class="w-1/5 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 flex flex-col text-right" dir="ltr">

    <!-- ุงูุญุงูุฉ -->
    <div class="p-4 border-b border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-700">
      <h2 class="font-bold text-gray-700 dark:text-white mb-2 text-right text-lg"> ุงูุญุงูุฉ</h2>

      <div class="flex flex-wrap gap-2 justify-end text-sm">
        <!-- ๐ ูุนูู -->
        <button
          class="px-4 py-1 rounded-md border transition duration-150"
          [ngClass]="{
            'bg-blue-500 text-white': selectedStatus === 0,
            'bg-white dark:bg-gray-600 dark:text-white text-gray-700 hover:bg-blue-50 dark:hover:bg-gray-500': selectedStatus !== 0
          }"
          (click)="filterDoctors(0)">
          ๐ ูุนูู
        </button>

        <!-- โ ููุจูู -->
        <button
          class="px-4 py-1 rounded-md border transition duration-150"
          [ngClass]="{
            'bg-green-500 text-white': selectedStatus === 1,
            'bg-white dark:bg-gray-600 dark:text-white text-gray-700 hover:bg-blue-50 dark:hover:bg-gray-500': selectedStatus !== 1
          }"
          (click)="filterDoctors(1)">
          โ ููุจูู
        </button>

        <!-- โ ูุฑููุถ -->
        <button
          class="px-4 py-1 rounded-md border transition duration-150"
          [ngClass]="{
            'bg-red-500 text-white': selectedStatus === 2,
            'bg-white dark:bg-gray-600 dark:text-white text-gray-700 hover:bg-blue-50 dark:hover:bg-gray-500': selectedStatus !== 2
          }"
          (click)="filterDoctors(2)">
          โ ูุฑููุถ
        </button>

        <!-- โธ๏ธ ูุคูุช -->
        <button
          class="px-4 py-1 rounded-md border transition duration-150"
          [ngClass]="{
            'bg-yellow-500 text-white': selectedStatus === 3,
            'bg-white dark:bg-gray-600 dark:text-white text-gray-700 hover:bg-blue-50 dark:hover:bg-gray-500': selectedStatus !== 3
          }"
          (click)="filterDoctors(3)">
          โธ๏ธ ูุคูุช
        </button>

        <!-- ๐ ุบูุฑ ููุนู -->
        <button
          class="px-4 py-1 rounded-md border transition duration-150"
          [ngClass]="{
            'bg-gray-600 text-white': selectedStatus === 4,
            'bg-white dark:bg-gray-600 dark:text-white text-gray-700 hover:bg-blue-50 dark:hover:bg-gray-500': selectedStatus !== 4
          }"
          (click)="filterDoctors(4)">
          ๐ ุบูุฑ ููุนู
        </button>
      </div>
    </div>

    <!-- Doctor Cards -->
    <div class="flex-1 overflow-y-auto p-4 space-y-2">
      <div
        *ngFor="let doctor of filteredDoctors"
        class="p-3 bg-gray-100 dark:bg-gray-700 rounded shadow cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600"
        (click)="selectDoctor(doctor)"
        [class.bg-blue-100]="doctor.doctorId === selectedDoctor?.doctorId"
      >
        <p class="font-bold text-gray-800 dark:text-white">{{ doctor.fullName }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-300">{{ doctor.specialization }}</p>
      </div>
    </div>
  </div>

  <!-- Doctor Details View -->
  <div class="w-4/5 p-6 bg-gray-50 dark:bg-gray-900 overflow-y-auto text-right">
    <div *ngIf="selectedDoctor" class="space-y-6">
      <!-- Header -->
      <div class="flex items-center gap-4 flex-row-reverse">
        <img [src]="selectedDoctor.profilePictureUrl" class="w-24 h-24 rounded-full object-cover border" />
        <div>
          <h2 class="text-2xl font-bold text-gray-800 dark:text-white">{{ selectedDoctor.fullName }}</h2>
          <p class="text-sm text-gray-500 dark:text-gray-300">{{ selectedDoctor.specialization }}</p>
          <p class="text-sm text-gray-500 dark:text-gray-300">{{ selectedDoctor.service }}</p>
        </div>
      </div>

      <!-- ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ -->
      <div class="bg-white dark:bg-gray-800 p-4 rounded shadow">
        <h3 class="text-lg font-bold border-b pb-2 text-gray-700 dark:text-white">๐ค ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ</h3>
        <p><strong>ุงูุงุณู:</strong> {{ selectedDoctor.fullName }}</p>
        <p><strong>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:</strong> {{ selectedDoctor.email }}</p>
        <p><strong>ุฑูู ุงููุงุชู:</strong> {{ selectedDoctor.phoneNumber }}</p>
        <p><strong>ุงูุฌูุณ:</strong> {{ selectedDoctor.gender }}</p>
        <p><strong>ุงูุญุงูุฉ:</strong> {{ getStatusLabel(selectedDoctor.status) }}</p>
      </div>

      <!-- ุงููููุฉ ูุงูุฎุฏูุฉ -->
      <div class="bg-white dark:bg-gray-800 p-4 rounded shadow">
        <h3 class="text-lg font-bold border-b pb-2 text-gray-700 dark:text-white">๐ฅ ุงููููุฉ ูุงูุฎุฏูุฉ</h3>
        <p><strong>ุงูุชุฎุตุต:</strong> {{ selectedDoctor.specialization || 'ุบูุฑ ูุญุฏุฏ' }}</p>
        <p><strong>ุงูุฎุฏูุฉ:</strong> {{ selectedDoctor.service }}</p>
        <p><strong>ุณููุงุช ุงูุฎุจุฑุฉ:</strong> {{ selectedDoctor.expYears }} ุณูุฉ</p>
        <p><strong>ูุฏุฉ ุงูุงูุชุธุงุฑ:</strong> {{ selectedDoctor.waitingTime }} ุฏูููุฉ</p>
        <p><strong>ุงูุฑุณูู:</strong> {{ selectedDoctor.fees | currency:'EGP' }}</p>
        <p><strong>ุงูุชูููู:</strong> {{ selectedDoctor.ratingValue }} / 5</p>
      </div>

      <!-- ุงูุนูุงููู -->
      <div class="bg-white dark:bg-gray-800 p-4 rounded shadow">
        <h3 class="text-lg font-bold border-b pb-2 text-gray-700 dark:text-white">๐ ุงููููุน ูุงูุนูุงููู</h3>
        <p><strong>ุงููููุน:</strong> {{ selectedDoctor.location }}</p>
        <p><strong>ุงูุนููุงู ุงูุชูุตููู:</strong> {{ selectedDoctor.detailedAddress || 'ุบูุฑ ูุชููุฑ' }}</p>
        <p><strong>ุงููุฏููุฉ:</strong> {{ selectedDoctor.cityName }}</p>
        <p><strong>ุงููุญุงูุธุฉ:</strong> {{ selectedDoctor.governmentName }}</p>
        <div>
          <strong>ุนูุงููู ุฅุถุงููุฉ:</strong>
          <ul class="list-disc pr-4 text-sm text-gray-600 dark:text-gray-300">
            <li *ngFor="let address of selectedDoctor.addresses">{{ address }}</li>
          </ul>
        </div>
      </div>

      <!-- ุงููุณุชูุฏุงุช -->
      <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-4 space-y-2">
        <h3 class="text-lg font-bold text-gray-700 dark:text-white border-b pb-1">๐ ุงููุณุชูุฏุงุช</h3>
        <p><strong>ุฑุฎุตุฉ ูุฒุงููุฉ ุงููููุฉ:</strong>
          <a *ngIf="selectedDoctor.medicalLicenseUrl" [href]="selectedDoctor.medicalLicenseUrl" target="_blank" class="text-blue-600 dark:text-blue-400 underline">ุนุฑุถ</a>
          <span *ngIf="!selectedDoctor.medicalLicenseUrl" class="text-gray-400">ุบูุฑ ูุชููุฑ</span>
        </p>
        <p><strong>ุงูุฑูู ุงููููู:</strong>
          <a *ngIf="selectedDoctor.nationalIdUrl" [href]="selectedDoctor.nationalIdUrl" target="_blank" class="text-blue-600 dark:text-blue-400 underline">ุนุฑุถ</a>
          <span *ngIf="!selectedDoctor.nationalIdUrl" class="text-gray-400">ุบูุฑ ูุชููุฑ</span>
        </p>
        <p><strong>ุดูุงุฏุฉ ุงูุชุฎุฑุฌ:</strong>
          <a *ngIf="selectedDoctor.graduationCertificateUrl" [href]="selectedDoctor.graduationCertificateUrl" target="_blank" class="text-blue-600 dark:text-blue-400 underline">ุนุฑุถ</a>
          <span *ngIf="!selectedDoctor.graduationCertificateUrl" class="text-gray-400">ุบูุฑ ูุชููุฑ</span>
        </p>
        <p><strong>ุดูุงุฏุฉ ุงูุฎุจุฑุฉ:</strong>
          <a *ngIf="selectedDoctor.experienceCertificateUrl" [href]="selectedDoctor.experienceCertificateUrl" target="_blank" class="text-blue-600 dark:text-blue-400 underline">ุนุฑุถ</a>
          <span *ngIf="!selectedDoctor.experienceCertificateUrl" class="text-gray-400">ุบูุฑ ูุชููุฑ</span>
        </p>
      </div>

      <!-- Action Buttons -->
      <div class="flex justify-end gap-4 pt-4" *ngIf="selectedDoctor">
        <button *ngIf="[0, 2, 3, 4].includes(selectedDoctor.status)" class="bg-green-500 hover:bg-green-600 text-white px-5 py-2 rounded-md">
          ูุจูู
        </button>
        <button *ngIf="[1].includes(selectedDoctor.status)" class="bg-gray-500 hover:bg-gray-600 text-white px-5 py-2 rounded-md">
          ุฅูุบุงุก
        </button>
        <button *ngIf="selectedDoctor.status === 0" class="bg-red-500 hover:bg-red-600 text-white px-5 py-2 rounded-md">
          ุฑูุถ
        </button>
        <button *ngIf="[0, 1, 2, 4].includes(selectedDoctor.status)" class="bg-yellow-600 hover:bg-yellow-700 text-white px-5 py-2 rounded-md">
          ุฅููุงู
        </button>
        <button *ngIf="[1, 2, 3, 4].includes(selectedDoctor.status)" class="bg-blue-500 hover:bg-blue-600 text-white px-5 py-2 rounded-md">
          ุชุนููู
        </button>
      </div>

      <div *ngIf="!selectedDoctor" class="text-gray-400 italic text-right mt-8">
        ุงุฎุชุฑ ุทุจูุจูุง ูุนุฑุถ ุงูุชูุงุตูู.
      </div>
    </div>
  </div>
</div>
