<div
  class="flex flex-col items-center justify-center min-h-screen p-6 text-center"
>
  <!-- أثناء التحميل -->
  <ng-container *ngIf="isLoading; else resultTemplate">
    <div class="flex flex-col items-center">
      <svg
        class="animate-spin h-12 w-12 text-[#00ba00] mb-4"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
      >
        <circle
          class="opacity-25"
          cx="12"
          cy="12"
          r="10"
          stroke="currentColor"
          stroke-width="4"
        ></circle>
        <path
          class="opacity-75"
          fill="currentColor"
          d="M4 12a8 8 0 018-8v8z"
        ></path>
      </svg>
      <p class="text-lg font-semibold text-[#00ba00]">
        جاري معالجة عملية الدفع .. يرجي الانتظار قليلاً
      </p>
    </div>
  </ng-container>

  <ng-template #resultTemplate>
    <div
      class="max-w-xl w-full mt-20 bg-white dark:bg-gray-950 rounded-2xl shadow-lg p-6 border-t-4 transition-all duration-300"
      [ngClass]="paymentData?.Success ? 'border-[#00ba00]' : 'border-[#f44336]'"
    >
      <div class="flex flex-col items-center mb-4">
        <img
          *ngIf="paymentData?.Success; else errorImage"
          src="https://cdn-icons-png.flaticon.com/512/14090/14090371.png"
          alt="Success"
          class="h-32 w-32 mb-4"
        />
        <ng-template #errorImage>
          <img
            src="https://cdn-icons-png.flaticon.com/512/9068/9068699.png"
            alt="Error"
            class="h-32 w-32 mb-4"
          />
        </ng-template>

        <h1
          class="text-4xl mb-2 font-extrabold"
          [ngClass]="paymentData?.Success ? 'text-[#00ba00] ' : 'text-[#f44336] '"
        >
          {{ paymentData?.Success ? 'شكرا لك، تم الدفع بنجاح' : 'عفوا، فشل
          الدفع' }}
        </h1>
        <p class="text-gray-600 dark:text-gray-300">
          {{ paymentData?.Success ? 'تمت معالجة معاملتك بنجاح' : 'حدث خطأ أثناء
          معالجة الدفع. حاول مرة أخرى او يمكنك الاتصال ببنكك للتفاصيل' }}
        </p>
      </div>

      <div
        class="text-right text-gray-800 dark:text-gray-200 space-y-2 text-base mt-6"
      >
        <p>
          رقم المعاملة: <span class="font-semibold">{{ paymentData?.Id }}</span>
        </p>
        <p>
          المبلغ:
          <span class="font-semibold"
            >{{ paymentData?.AmountCents / 100 }} EGP</span
          >
        </p>
        <p>
          نوع البطاقة:
          <span class="font-semibold">{{ paymentData?.CardType }} Gold</span>
        </p>
        <p>
          اخر اربع ارقام من البطاقة:
          <span class="font-semibold">
            {{ paymentData?.Pan }} **** **** ****
          </span>
        </p>
        <p>
          تاريخ العملية:
          <span class="font-semibold">{{ paymentData?.Date }}</span>
        </p>
        <p class="text-sm text-gray-500 dark:text-gray-400 mt-0 break-words">
          رقم مرجع العملية:
          <span class="font-mono">{{paymentData?.Hmac}}</span>
        </p>
      </div>

      <div *ngIf="!isLoading">
        <a
          *ngIf="paymentData?.Success; else homeLink"
          class="form-btn"
          routerLink="/appointment"
          >اضغط لتأكيد حجزك</a
        >
        <ng-template #homeLink>
          <br />
          <a
            class="bg-gray-500 p-2 rounded-xl w-full inline-block"
            routerLink="/all-doctors"
            >اعادة الحجز مرة اخري</a
          >
        </ng-template>
      </div>
    </div>
  </ng-template>
</div>
